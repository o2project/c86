<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE article PUBLIC "-//OASIS//DTD DocBook XML V4.5//EN" "http://www.oasis-open.org/docbook/xml/4.5/docbookx.dtd">
<?asciidoc-toc?>
<?asciidoc-numbered?>

<article lang="en">
<articleinfo>
    <date>2018-08-29</date>
</articleinfo>
<section id="git-rebase">
<title>作業内容を改変する</title>
<simpara>作業内容を改変します。例えるならば、タイムリープマシンを使って過去の作業をやり直す感じです。</simpara>
<simpara>電話レンジ(仮)を改造してタイムリープマシンができた後、萌郁やラウンダー達の襲撃もしくは他の要因により、まゆりが何度も死んでしまった状態の最新の作業内容ですが「ラウンダー追ってきて、まゆりが刺されて死んだ」となっています。</simpara>
<informalfigure>
<mediaobject>
  <imageobject>
  <imagedata fileref="ch3/git-rebase/source-tree/message-edit-before.jpg"/>
  </imageobject>
  <textobject><phrase>まゆりが何度も死んでしまったときの作業内容</phrase></textobject>
</mediaobject>
</informalfigure>
<section id="_コミットメッセージを修正する">
<title>コミットメッセージを修正する</title>
<simpara>まず始めに、コミットメッセージを修正してみます。</simpara>
<simpara>先ほどの最新の作業内容を記録したコミットが「ラウンダー追ってきて」と、間に「が」が足りないメッセージになっています。これを修正するため、直したい対象の一つ前の作業内容を右クリックで選択し「"コミット番号" の子を対話形式でリベース」を選びます。</simpara>
<informalfigure>
<mediaobject>
  <imageobject>
  <imagedata fileref="ch3/git-rebase/source-tree/message-edit-select.jpg"/>
  </imageobject>
  <textobject><phrase>対話形式でリベースを選択している状態</phrase></textobject>
</mediaobject>
</informalfigure>
<simpara>すると、対象となる作業内容が表示されるので、コミットメッセージを直したい作業内容を選び、画面下部の「Edit message」を押します。すると、コミットメッセージを編集する画面が表示されます。</simpara>
<informalfigure>
<mediaobject>
  <imageobject>
  <imagedata fileref="ch3/git-rebase/source-tree/message-edit-now.jpg"/>
  </imageobject>
  <textobject><phrase>コミットメッセージを編集している状態</phrase></textobject>
</mediaobject>
</informalfigure>
<simpara>任意のコミットメッセージを書いた後「OK」ボタンを押すとコミットメッセージが修正されます。</simpara>
<informalfigure>
<mediaobject>
  <imageobject>
  <imagedata fileref="ch3/git-rebase/source-tree/message-edit-after.jpg"/>
  </imageobject>
  <textobject><phrase>コミットメッセージを編集し終えた状態</phrase></textobject>
</mediaobject>
</informalfigure>
</section>
<section id="_複数の作業内容を一つにまとめる">
<title>複数の作業内容を一つにまとめる</title>
<simpara>次に、まゆりが死んだと書かれた複数の履歴を一つにまとめます。直したい対象の一つ前の作業内容を右クリックで選択し「"コミット番号" の子を対話形式でリベース」を選びます。</simpara>
<informalfigure>
<mediaobject>
  <imageobject>
  <imagedata fileref="ch3/git-rebase/source-tree/squash-right-click.jpg"/>
  </imageobject>
  <textobject><phrase>git rebase squash するべく親となるコミットを選択している状態</phrase></textobject>
</mediaobject>
</informalfigure>
<simpara>今回は四つの作業内容を対象としました。ここから作業内容をまとめるには「Squash with previous」を三回押します。「まとめる作業内容の数 - 一回 Squash with previous を押す」と覚えるといいかもしれません。</simpara>
<informalfigure>
<mediaobject>
  <imageobject>
  <imagedata fileref="ch3/git-rebase/source-tree/squash-before.jpg"/>
  </imageobject>
  <textobject><phrase>git rebase squash しようとしている状態</phrase></textobject>
</mediaobject>
</informalfigure>
<simpara>その後、まとめた作業内容のコミットメッセージを編集するために「Edit message」を押します。</simpara>
<informalfigure>
<mediaobject>
  <imageobject>
  <imagedata fileref="ch3/git-rebase/source-tree/squash-message-edit.jpg"/>
  </imageobject>
  <textobject><phrase>コミットをまとめた後コミットメッセージを編集している状態</phrase></textobject>
</mediaobject>
</informalfigure>
<simpara>これで、まゆりが死んだと書かれた複数の履歴がまとめられました。</simpara>
<informalfigure>
<mediaobject>
  <imageobject>
  <imagedata fileref="ch3/git-rebase/source-tree/squash-after.jpg"/>
  </imageobject>
  <textobject><phrase>git rebase squashした状態</phrase></textobject>
</mediaobject>
</informalfigure>
</section>
</section>
</article>
